{"title":"Stencil Redux","description":"Stencil Redux is a simple connector for Stencil-built web components.","url":"/docs/redux","contributors":["jthoms1"],"headings":[{"id":"stencil-redux","level":1,"text":"Stencil Redux"},{"id":"usage","level":2,"text":"Usage"},{"id":"configure-store","level":3,"text":"Configure store"},{"id":"configure-reducers","level":3,"text":"Configure reducers"},{"id":"configure-store-in-root-component","level":3,"text":"Configure Store in Root Component"},{"id":"map-state-and-dispatch-to-props","level":3,"text":"Map state and dispatch to props"}],"srcPath":"./src/docs/state-management/redux.md","content":"\n<h1 id=\"stencil-redux\">\n  \n  Stencil Redux\n  \n</h1>\n<p>A simple redux connector for Stencil-built web components inspired by react-redux.</p>\n\n<h2 id=\"usage\">\n  <a class=\"heading-link\" href=\"#usage\"><app-icon name=\"link\"></app-icon>\n  Usage\n  </a>\n</h2>\n<p>Stencil Redux uses the official redux library underneath, so much of the creation and configuration of the store, along with specifying reducers and middleware, is identical.</p>\n\n<h3 id=\"configure-store\">\n  <a class=\"heading-link\" href=\"#configure-store\"><app-icon name=\"link\"></app-icon>\n  Configure store\n  </a>\n</h3>\n\n  <highlight-code-line >\n    <pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// src/store/index.ts</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createStore<span class=\"token punctuation\">,</span> applyMiddleware <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> thunk <span class=\"token keyword\">from</span> <span class=\"token string\">'redux-thunk'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Add-on you might want</span>\n<span class=\"token keyword\">import</span> logger <span class=\"token keyword\">from</span> <span class=\"token string\">'redux-logger'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Add-on you might want</span>\n<span class=\"token keyword\">import</span> rootReducer <span class=\"token keyword\">from</span> <span class=\"token string\">'../reducers/index'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">configureStore</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>preloadedState<span class=\"token punctuation\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>rootReducer<span class=\"token punctuation\">,</span> preloadedState<span class=\"token punctuation\">,</span> <span class=\"token function\">applyMiddleware</span><span class=\"token punctuation\">(</span>thunk<span class=\"token punctuation\">,</span> logger<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> configureStore <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n  </highlight-code-line>\n  \n<h3 id=\"configure-reducers\">\n  <a class=\"heading-link\" href=\"#configure-reducers\"><app-icon name=\"link\"></app-icon>\n  Configure reducers\n  </a>\n</h3>\n\n  <highlight-code-line >\n    <pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// src/reducers/index.ts</span>\n<span class=\"token keyword\">import</span> myReducer <span class=\"token keyword\">from</span> <span class=\"token string\">'./myReducer'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> combineReducers <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> rootReducer <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>combineReducers <span class=\"token keyword\">as</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  myReducer\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> rootReducer<span class=\"token punctuation\">;</span></code></pre>\n  </highlight-code-line>\n  \n<h3 id=\"configure-store-in-root-component\">\n  <a class=\"heading-link\" href=\"#configure-store-in-root-component\"><app-icon name=\"link\"></app-icon>\n  Configure Store in Root Component\n  </a>\n</h3>\n\n  <highlight-code-line >\n    <pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Store <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@stencil/redux'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> configureStore <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../store/index'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// index required due to bug</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  tag<span class=\"token punctuation\">:</span> <span class=\"token string\">'my-app'</span><span class=\"token punctuation\">,</span>\n  styleUrl<span class=\"token punctuation\">:</span> <span class=\"token string\">'my-app.scss'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyApp</span> <span class=\"token punctuation\">{</span>\n  @<span class=\"token function\">Prop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> context<span class=\"token punctuation\">:</span> <span class=\"token string\">'store'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> store<span class=\"token punctuation\">:</span> Store<span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">componentWillLoad</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>store<span class=\"token punctuation\">.</span><span class=\"token function\">setStore</span><span class=\"token punctuation\">(</span><span class=\"token function\">configureStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n  </highlight-code-line>\n  \n<h3 id=\"map-state-and-dispatch-to-props\">\n  <a class=\"heading-link\" href=\"#map-state-and-dispatch-to-props\"><app-icon name=\"link\"></app-icon>\n  Map state and dispatch to props\n  </a>\n</h3>\n\n  <highlight-code-line >\n    <pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Store<span class=\"token punctuation\">,</span> Action <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@stencil/redux'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  tag<span class=\"token punctuation\">:</span> <span class=\"token string\">'my-component'</span><span class=\"token punctuation\">,</span>\n  styleUrl<span class=\"token punctuation\">:</span> <span class=\"token string\">'my-component.scss'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyComponent</span> <span class=\"token punctuation\">{</span>\n  @<span class=\"token function\">Prop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> context<span class=\"token punctuation\">:</span> <span class=\"token string\">'store'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> store<span class=\"token punctuation\">:</span> Store<span class=\"token punctuation\">;</span>\n\n  @<span class=\"token function\">State</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> name<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n\n  changeName<span class=\"token punctuation\">:</span> Action<span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">componentWillLoad</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>store<span class=\"token punctuation\">.</span><span class=\"token function\">mapStateToProps</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n        myReducer<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> name <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> state<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        name\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>store<span class=\"token punctuation\">.</span><span class=\"token function\">mapDispatchToProps</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      changeName\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">doNameChange</span><span class=\"token punctuation\">(</span>newName<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">changeName</span><span class=\"token punctuation\">(</span>newName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n  </highlight-code-line>\n  "}